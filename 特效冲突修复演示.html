<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ—‹åœ°è½¬ + æœ€ç»ˆé˜²çº¿ç‰¹æ•ˆå†²çªä¿®å¤æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .problem-section, .solution-section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .problem-section {
            background: linear-gradient(45deg, #ffb3b3, #ffcccc);
            border-left: 5px solid #ff4757;
        }

        .solution-section {
            background: linear-gradient(45deg, #c7ecee, #dff9fb);
            border-left: 5px solid #2ed573;
        }

        .section-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-block {
            background: #2c2c2c;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.6;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .before, .after {
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .before {
            background: #ffe6e6;
            border: 2px solid #ff4757;
        }

        .after {
            background: #e6ffe6;
            border: 2px solid #2ed573;
        }

        .flow-diagram {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            background: #3742fa;
            color: white;
            padding: 15px 25px;
            margin: 5px;
            border-radius: 25px;
            position: relative;
        }

        .flow-step:not(:last-child):after {
            content: 'â†’';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            color: #3742fa;
            font-weight: bold;
            font-size: 1.2em;
        }

        .highlight {
            background: #ffd32a;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .test-section {
            background: #f1f2f6;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .test-steps {
            list-style: none;
            counter-reset: step-counter;
        }

        .test-steps li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding: 15px 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: relative;
            padding-left: 60px;
        }

        .test-steps li:before {
            content: counter(step-counter);
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #3742fa;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
            
            .flow-step {
                display: block;
                margin: 10px 0;
            }
            
            .flow-step:not(:last-child):after {
                content: 'â†“';
                position: static;
                display: block;
                text-align: center;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ ç‰¹æ•ˆå†²çªä¿®å¤æ¼”ç¤º</h1>
            <p>å¤©æ—‹åœ°è½¬ + æœ€ç»ˆé˜²çº¿ç‰¹æ•ˆå…¼å®¹æ€§é—®é¢˜è§£å†³æ–¹æ¡ˆ</p>
        </div>

        <div class="content">
            <!-- é—®é¢˜æè¿° -->
            <div class="problem-section">
                <h2 class="section-title">
                    <span class="emoji">âš ï¸</span>
                    é—®é¢˜æè¿°
                </h2>
                <p>å½“<strong>å¤©æ—‹åœ°è½¬</strong>ç‰¹æ•ˆå’Œ<strong>æœ€ç»ˆé˜²çº¿</strong>ç‰¹æ•ˆåŒæ—¶å¯ç”¨æ—¶ï¼Œå‡ºç°ä¸€ä¸ªä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜ï¼š</p>
                <ul style="margin: 20px 0; padding-left: 30px; line-height: 1.8;">
                    <li>ç©å®¶æ˜æ˜æ­£ç¡®è°ƒæ•´äº†æ‹¼å›¾å—çš„æ—‹è½¬å’Œç¿»è½¬çŠ¶æ€</li>
                    <li>æ”¾ç½®åˆ°æ­£ç¡®ä½ç½®æ—¶å´ç›´æ¥æŠ¥é”™</li>
                    <li>æœ€ç»ˆé˜²çº¿ç‰¹æ•ˆè¯¯åˆ¤ä¸º"æ”¾ç½®å¤±è¯¯"</li>
                    <li>å¯¼è‡´æ¸¸æˆä½“éªŒæå·®ï¼Œæ— æ³•æ­£å¸¸å®ŒæˆæŒ‘æˆ˜</li>
                </ul>
            </div>

            <!-- æŠ€æœ¯åŸç† -->
            <div class="solution-section">
                <h2 class="section-title">
                    <span class="emoji">ğŸ”</span>
                    æŠ€æœ¯åŸç†åˆ†æ
                </h2>
                
                <h3>å¤©æ—‹åœ°è½¬ç‰¹æ•ˆæœºåˆ¶ï¼š</h3>
                <div class="code-block">
// æ‹¼å›¾ç”Ÿæˆæ—¶å¯ç”¨æ—‹è½¬æ¨¡å¼
const rotatedConfig = await PuzzleGenerator.generatePuzzle({
  allowRotation: true, // å¯ç”¨ç¿»è½¬æ¨¡å¼
  // æ‹¼å›¾å—éšæœºåˆå§‹çŠ¶æ€ï¼šrotation: 90Â°, isFlipped: true
  // ç©å®¶é€šè¿‡Ré”®ã€Fé”®è°ƒæ•´åˆ°æ­£ç¡®çŠ¶æ€ï¼šrotation: 0Â°, isFlipped: false
});
                </div>

                <h3>æœ€ç»ˆé˜²çº¿ç‰¹æ•ˆæœºåˆ¶ï¼š</h3>
                <div class="code-block">
// æ£€æµ‹æ‹¼å›¾å—æ”¾ç½®æ­£ç¡®æ€§
const isCorrectPlacement = 
  piece.correctSlot === slotIndex && 
  piece.rotation === piece.correctRotation && 
  piece.isFlipped === piece.correctIsFlipped;

if (!isCorrectPlacement) {
  // é”™è¯¯æ”¾ç½®ï¼Œç«‹å³æ˜¾ç¤ºå¤±è´¥å¼¹çª—
  setFailureReason('æœ€ç»ˆé˜²çº¿ç‰¹æ•ˆä¸å…è®¸ä»»ä½•æ”¾ç½®å¤±è¯¯');
  setShowFailureModal(true);
}
                </div>
            </div>

            <!-- é—®é¢˜æ ¹å›  -->
            <div class="flow-diagram">
                <h3>ğŸ› é—®é¢˜æ ¹å› ï¼šçŠ¶æ€åŒæ­¥æ—¶æœºå†²çª</h3>
                <div style="margin: 20px 0;">
                    <div class="flow-step">ç©å®¶æŒ‰Ré”®è°ƒæ•´</div>
                    <div class="flow-step">rotatePiece()</div>
                    <div class="flow-step">ReactçŠ¶æ€æ›´æ–°</div>
                    <div class="flow-step">ç©å®¶æ”¾ç½®æ‹¼å›¾å—</div>
                    <div class="flow-step">âŒ æ£€æµ‹åˆ°æ—§çŠ¶æ€</div>
                    <div class="flow-step">è¯¯æŠ¥é”™è¯¯</div>
                </div>
                <p style="color: #ff4757; font-weight: bold; margin-top: 20px;">
                    æ ¸å¿ƒé—®é¢˜ï¼šæœ€ç»ˆé˜²çº¿ç‰¹æ•ˆåœ¨<span class="highlight">æ”¾ç½®å‰</span>æ£€æµ‹çŠ¶æ€ï¼Œè·å–åˆ°çš„å¯èƒ½æ˜¯è¿‡æ—¶çš„æ‹¼å›¾å—çŠ¶æ€ï¼
                </p>
            </div>

            <!-- ä¿®å¤æ–¹æ¡ˆå¯¹æ¯” -->
            <div class="comparison">
                <div class="before">
                    <h3>ğŸš« ä¿®å¤å‰ï¼ˆæœ‰é—®é¢˜ï¼‰</h3>
                    <div class="code-block">
// âŒ é”™è¯¯ï¼šåœ¨æ”¾ç½®å‰æ£€æµ‹çŠ¶æ€
if (challenge.effects?.includes('æœ€ç»ˆé˜²çº¿')) {
  const piece = gameState?.config.pieces
    .find(p => p.id === pieceId);
  
  // æ£€æµ‹çš„å¯èƒ½æ˜¯è¿‡æ—¶çŠ¶æ€
  if (!isCorrectPlacement) {
    setFailureReason('æ”¾ç½®å¤±è¯¯ï¼');
    return; // ç›´æ¥ä¸­æ–­ï¼Œä¸æ‰§è¡Œæ”¾ç½®
  }
}

// æ‰§è¡Œæ”¾ç½®é€»è¾‘
placePieceToSlot(pieceId, slotIndex);
                    </div>
                </div>

                <div class="after">
                    <h3>âœ… ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰</h3>
                    <div class="code-block">
// âœ… æ­£ç¡®ï¼šåœ¨æ”¾ç½®åæ£€æµ‹çŠ¶æ€
if (challenge.effects?.includes('æœ€ç»ˆé˜²çº¿')) {
  // å…ˆæ‰§è¡Œæ”¾ç½®é€»è¾‘
  placePieceToSlot(pieceId, slotIndex);
  
  // å»¶è¿Ÿæ£€æµ‹ï¼Œç¡®ä¿çŠ¶æ€å·²æ›´æ–°
  setTimeout(() => {
    const piece = gameState.config.pieces
      .find(p => p.id === pieceId);
    
    // æ£€æµ‹çš„æ˜¯æœ€æ–°çŠ¶æ€
    if (!isCorrectPlacement) {
      setFailureReason('æ”¾ç½®å¤±è¯¯ï¼');
      setShowFailureModal(true);
    }
  }, 50); // 50mså»¶è¿Ÿ
}
                    </div>
                </div>
            </div>

            <!-- ä¿®å¤æ•ˆæœ -->
            <div class="flow-diagram">
                <h3>âœ¨ ä¿®å¤åï¼šæ­£ç¡®çš„çŠ¶æ€æ£€æµ‹æµç¨‹</h3>
                <div style="margin: 20px 0;">
                    <div class="flow-step">ç©å®¶æŒ‰é”®è°ƒæ•´</div>
                    <div class="flow-step">æ”¾ç½®æ‹¼å›¾å—</div>
                    <div class="flow-step">çŠ¶æ€æ›´æ–°</div>
                    <div class="flow-step">å»¶è¿Ÿæ£€æµ‹</div>
                    <div class="flow-step">âœ… è·å–æœ€æ–°çŠ¶æ€</div>
                    <div class="flow-step">æ­£ç¡®è¯†åˆ«</div>
                </div>
                <p style="color: #2ed573; font-weight: bold; margin-top: 20px;">
                    è§£å†³æ–¹æ¡ˆï¼šæ”¹ä¸º<span class="highlight">æ”¾ç½®åæ£€æµ‹</span>ï¼Œç¡®ä¿è·å–åˆ°æœ€æ–°çš„æ‹¼å›¾å—çŠ¶æ€ï¼
                </p>
            </div>

            <!-- æµ‹è¯•æ–¹æ¡ˆ -->
            <div class="test-section">
                <h2 class="section-title">
                    <span class="emoji">ğŸ§ª</span>
                    æµ‹è¯•éªŒè¯æ­¥éª¤
                </h2>
                <ol class="test-steps">
                    <li>è¿›å…¥æ¯æ—¥æŒ‘æˆ˜é¡µé¢</li>
                    <li>åŒæ—¶é€‰æ‹©"å¤©æ—‹åœ°è½¬"å’Œ"æœ€ç»ˆé˜²çº¿"ç‰¹æ•ˆ</li>
                    <li>å¼€å§‹æŒ‘æˆ˜ï¼Œè§‚å¯Ÿæ‹¼å›¾å—çš„éšæœºæ—‹è½¬/ç¿»è½¬çŠ¶æ€</li>
                    <li>é€‰æ‹©ä¸€ä¸ªæ‹¼å›¾å—ï¼Œä½¿ç”¨Ré”®æ—‹è½¬ã€Fé”®ç¿»è½¬è°ƒæ•´åˆ°æ­£ç¡®çŠ¶æ€</li>
                    <li>å°†æ‹¼å›¾å—æ”¾ç½®åˆ°æ­£ç¡®ä½ç½®</li>
                    <li>éªŒè¯æ˜¯å¦èƒ½æ­£å¸¸æ”¾ç½®ï¼Œä¸ä¼šå‡ºç°è¯¯æŠ¥é”™è¯¯</li>
                    <li>ç»§ç»­å®Œæˆæ•´ä¸ªæ‹¼å›¾ï¼Œç¡®è®¤ç‰¹æ•ˆåŠŸèƒ½æ­£å¸¸</li>
                </ol>
            </div>

            <!-- ä¿®å¤æ€»ç»“ -->
            <div class="solution-section">
                <h2 class="section-title">
                    <span class="emoji">ğŸ¯</span>
                    ä¿®å¤æ€»ç»“
                </h2>
                <p>é€šè¿‡è¿™ä¸ªä¿®å¤ï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†å¤©æ—‹åœ°è½¬å’Œæœ€ç»ˆé˜²çº¿ç‰¹æ•ˆçš„å†²çªé—®é¢˜ï¼š</p>
                <ul style="margin: 20px 0; padding-left: 30px; line-height: 1.8;">
                    <li><strong>æ—¶æœºè°ƒæ•´</strong>ï¼šå°†æ£€æµ‹ä»"æ”¾ç½®å‰"æ”¹ä¸º"æ”¾ç½®å"</li>
                    <li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šç¡®ä¿æ£€æµ‹åˆ°çš„æ˜¯æœ€æ–°çš„æ‹¼å›¾å—çŠ¶æ€</li>
                    <li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šä½¿ç”¨é€‚å½“çš„å»¶è¿Ÿç¡®ä¿ReactçŠ¶æ€æ›´æ–°å®Œæˆ</li>
                    <li><strong>å…¼å®¹æ€§</strong>ï¼šä¿æŒå…¶ä»–ç‰¹æ•ˆçš„æ­£å¸¸åŠŸèƒ½</li>
                </ul>
                <p style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-top: 20px;">
                    <strong>ğŸ® ç°åœ¨ç©å®¶å¯ä»¥æ­£å¸¸äº«å—å¤©æ—‹åœ°è½¬å’Œæœ€ç»ˆé˜²çº¿ç‰¹æ•ˆçš„ç»„åˆæŒ‘æˆ˜ï¼Œä¸ä¼šå†é‡åˆ°è¯¯æŠ¥é”™è¯¯çš„é—®é¢˜ï¼</strong>
                </p>
            </div>
        </div>
    </div>
</body>
</html>